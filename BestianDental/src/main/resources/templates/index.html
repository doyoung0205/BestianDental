<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layout1}">

<div layout:fragment="content">

<section id ="mainVisual"> 
	<ul class ="visual_wrap"> 
		<!-- 이미지가 들어가는 태그  list1--> 
		<li class ="list1 active" >
			<div class ="leftTap"> 
			<div class ="imageBarWrap">
				<div class ="bar title"></div>
			</div>
			
			<div class ="imageContentWrap">			
					<div class ="visual_img title target">  
						<div class ="imageWrap"><img alt="" src="/img/main/carocel1/title.png"></div>
					</div>
					 
					<div class ="visual_img sub target">
						<div class =imageWrap><img alt="" src="/img/main/carocel1/sub.png"></div>
					</div>  
			</div>		
					<div>
				</div>
			</div>
			
			<div class ="visual_imgWrap text target">
				<div class ="visual_img">
					<div class ="imageWrap"><img alt="" src="/img/main/carocel1/text.png"></div>
				</div>
			</div>
		</li>
		 

		 
		<!-- 이미지가 들어가는 태그  list2--> 
		<li class ="list2">
			<div class ="leftTap"> 
			<div class ="imageBarWrap">
				<div class ="bar title"></div>
			</div>
			
			<div class ="imageContentWrap">			
					<div class ="visual_img title target">  
						<div class ="imageWrap"><img alt="" src="/img/main/carocel1/title.png"></div>
					</div>
					 
					<div class ="visual_img sub target">
						<div class =imageWrap><img alt="" src="/img/main/carocel1/sub.png"></div>
					</div>  
			</div>		
					<div>
				</div>
			</div>
			
			<div class ="visual_imgWrap text target">
				<div class ="visual_img">
					<div class ="imageWrap"><img alt="" src="/img/main/carocel1/text.png"></div>
				</div>
			</div>
		</li>
		 

		 		 		<!-- 이미지가 들어가는 태그  list3--> 
		<li class ="list3">
			<div class ="leftTap"> 
			<div class ="imageBarWrap">
				<div class ="bar title"></div>
			</div>
			
			<div class ="imageContentWrap">			
					<div class ="visual_img title target">  
						<div class ="imageWrap"><img alt="" src="/img/main/carocel1/title.png"></div>
					</div>
					 
					<div class ="visual_img sub target">
						<div class =imageWrap><img alt="" src="/img/main/carocel1/sub.png"></div>
					</div>  
			</div>		
					<div>
				</div>
			</div>
			
			<div class ="visual_imgWrap text target">
				<div class ="visual_img">
					<div class ="imageWrap"><img alt="" src="/img/main/carocel1/text.png"></div>
				</div>
			</div>
		</li>
		 

		<!-- 이미지가 들어가는 태그  list4--> 
		<li class ="list4">
			<div class ="leftTap"> 
			<div class ="imageBarWrap">
				<div class ="bar title"></div>
			</div>
			
			<div class ="imageContentWrap">			
					<div class ="visual_img title target">  
						<div class ="imageWrap"><img alt="" src="/img/main/carocel1/title.png"></div>
					</div>
					 
					<div class ="visual_img sub target">
						<div class =imageWrap><img alt="" src="/img/main/carocel1/sub.png"></div>
					</div>  
			</div>		
					<div>
				</div>
			</div>
			
			<div class ="visual_imgWrap text target">
				<div class ="visual_img">
					<div class ="imageWrap"><img alt="" src="/img/main/carocel1/text.png"></div>
				</div>
			</div>
		</li>
		 

		 		 
	</ul> 

	<!-- 케러셀 버튼 -->
<!-- 	<div id="navBtn">
			<button type="button" class="prev">prev btn</button>
			<button type="button" class="next">next btn</button>
	</div> -->
			
	<!-- 케러셀 dot -->
	<ul id="indiBtn">
	     <li><button type="button" class="active">1</button></li> 
		 <li><button type="button">2</button></li>
		 <li><button type="button">3</button></li>
		 <li><button type="button">4</button></li>
	</ul>
	<!-- 캐러셀 end -->


</section>
<section>
	<div class ="mainVisual-footer">
	
		<div class ="rightBox">
			<div class ="semiBoxWrap">
				<div class ="semiBox">
					<div class ="semiTitle"><h3>Before</h3></div>
					<div class ="semiContent">
						<div class ="imageWrap"><img alt="" src="/img/main/carocel1/before.png"></div>
					</div>
				</div>
				
				<div class ="semiBox after">
					<div class ="semiTitle"><h3>After</h3><span class="more">더보기 <img alt="" src="/img/main/ic_add_box_24px.png"> </span></div>
					<div class ="semiContent">
						<div class ="imageWrap"><img alt="" src="/img/main/carocel1/after.png"></div>
					</div>
				</div>
			</div>
		</div>
			
		<div class ="leftBox">
				<div class ="content">
					<div  class ="cacaoLine-Box"><span>카카오톡 상담</span><img alt="" src="/img/main/kakao.png"></div>
					<div><h1>BESTIANSEOUL</h1></div>
				</div>
		</div>
		
		<div class ="cacaoLine">
				<div class ="content">
					<div><h1><span>카카오톡 상담</span><b>BESTIANSEOUL</b><img alt="" src="/img/main/kakao.png"></h1></div>
				</div>
		</div>

	</div>		
</section>



</div>
<!--  end fragment -->

<th:block layout:fragment="script">

	<script th:inline="javascript">
	
	var winW;
	var winH;
	var es_step = "Expo.ease";
	var $window = $(window);
	
	var textImgW = $(".visual_imgWrap.text").width();
	var titleWidth = $(".visual_img.title.target").width();			
	var subWidth = $(".visual_img.sub.target").width(); 		

	 
	 $window.load(function () {
		 
		    $window.on("resize", function () {
		    	
		        winW = $(this).width();
		        winH = $(this).height();
		        
				Carocellayout();
				
		    });
		    
		    $(this).trigger("resize");

		    Carocellayout();
		    main();
	 });
	  
	 
	 function Carocellayout(){
		 
			var FullWidth = $("#mainVisual").width();
			
			//sub 위치 조정
 			if(FullWidth > 1200){
				if(1920> FullWidth && FullWidth  < 1642){ 
					$(".visual_imgWrap.text").css("right",-((1642 - FullWidth)/2 + 47)); 
				} else if(FullWidth < 1920){
	 				$(".visual_imgWrap.text").css("right",-(1920 - FullWidth)/6); 
				} else{
					$(".visual_imgWrap.text").css("right","0"); 
				}
 			}
 			
			//title 위치 조정
			var barWidth = $(".bar").width();
			
			var titleTargetH =$(".visual_wrap li.active").find(" .title.target").height()/2+1;
			if(1920> FullWidth && FullWidth  > 1280){
				
				var textWidth = $(".visual_wrap li.active .visual_imgWrap.text.target .visual_img").width();
				var tempWidth = $(".visual_imgWrap.text").css("right").replace("px","") ;
				tempWidth *= 1;
				textWidth  = textWidth +tempWidth;
				var dif  = FullWidth-textWidth;
				
				$(".bar").width(dif);
				$("#indiBtn").css("left",dif);
				
				$(".visual_img.title.target").width(titleWidth);
				$(".visual_img.sub.target").width(subWidth);
				
				$(".bar").height(titleTargetH);
				
				
			} else if(FullWidth < 1280){
				
				
				var semiWidth = $(".semiBox ").width()*2;
				var dif = (FullWidth - semiWidth)/2;
				
				$(".bar").width(dif);
				$("#indiBtn").css("left",dif);
				
				if(dif< 100){
					$(".visual_img.title.target").width(titleWidth - (130-dif));
					$(".visual_img.sub.target").width(subWidth -  (100-dif));
				}
				
				$(".bar").height(titleTargetH);
								
			}
	 }
	 
	 
	 function main(){
		    //mainVisual
		    var $mainVisual = $("#mainVisual");
		    var $visualWrap = $mainVisual.find(".visual_wrap"), 
		      	  $visualWrapLi = $visualWrap.find("li"),
		    	  _visualLength = $visualWrapLi.length;
		    
		    var $indiBtn = $mainVisual.find("#indiBtn");
		    
		    /* TweenMax.staggerTo($visualWrapLi.eq(0).find(" .title, .sub, .text"), .3, {y: 0, opacity: 1, ease: es_step}, .2); */

		    TweenMax.delayedCall(0.3,function(){
			    TweenMax.fromTo($visualWrapLi.eq(0).find(" .title"), 0.5, {alpha:0, x:-100},{alpha:1.0, x:0, ease: Quad.easeOut, force3D: true});
		    });

		    TweenMax.delayedCall(0.4,function(){
			    TweenMax.fromTo($visualWrapLi.eq(0).find(" .sub"), 0.5, {alpha:0, y:20},{alpha:1.0, y:0, ease: Quad.easeOut, force3D: true});
		    });

		    TweenMax.delayedCall(0.5,function(){
			    TweenMax.fromTo($visualWrapLi.eq(0).find(" .text"), 0.5, {alpha:0, x:100},{alpha:1.0, x:0, ease: Quad.easeOut, force3D: true});
		    });
		    
		    TweenMax.delayedCall(0.6,function(){ 
			    TweenMax.fromTo($("#indiBtn"), 0.5, {alpha:0, x:100},{alpha:1.0, x:0, ease: Quad.easeOut, force3D: true});
		    });
		     
		    var visualCrr = {}; 
		    
		    Object.defineProperty(visualCrr, 'number', {
		        get: function () { 
		            return this.num || 0;
		        },
		        set: function (_visualCrr) {
		            _visualCrr = _visualCrr % _visualLength;
		            TweenMax.to($visualWrapLi, .3, {opacity:0, display:"none", ease:es_step});
		            
		            TweenMax.to($visualWrapLi.eq(_visualCrr), .3, {opacity:1, display:"block", ease:es_step});
		            
				    TweenMax.delayedCall(0.3,function(){
					    TweenMax.fromTo($visualWrapLi.eq(_visualCrr).find(" .title"), 0.5, {alpha:0, x:-100},{alpha:1.0, x:0, ease: Quad.easeOut, force3D: true});
				    });

				    TweenMax.delayedCall(0.4,function(){
					    TweenMax.fromTo($visualWrapLi.eq(_visualCrr).find(" .sub"), 0.5, {alpha:0, y:20},{alpha:1.0, y:0, ease: Quad.easeOut, force3D: true});
				    });

				    TweenMax.delayedCall(0.5,function(){
					    TweenMax.fromTo($visualWrapLi.eq(_visualCrr).find(" .text"), 0.5, {alpha:0, x:100},{alpha:1.0, x:0, ease: Quad.easeOut, force3D: true});
				    });
		            $indiBtn.find("li button").removeClass("active");
		            $indiBtn.find("li").eq(_visualCrr).find("button").addClass("active");
		            $visualWrapLi.removeClass("active");
		            $visualWrapLi.eq(_visualCrr).addClass("active");
		            this.num = _visualCrr;
		        }
		    });

		    $indiBtn.find("button").click(function () {
		        var _this = $(this);
		        var _visualCrr = _this.parent().index();

		        visualCrr.number = _visualCrr;
		    });
		    
	 } 
	 
	 
		
	</script>

</th:block>
</html>
